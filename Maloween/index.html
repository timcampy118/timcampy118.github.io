<!doctype html>
<html lang="en">
   <head>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1" />
      <title>Draw the Logo from Memory</title>
      <link rel="stylesheet" href="style.css" />
      <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@simonwep/pickr/dist/themes/classic.min.css" />
      <script src="https://cdn.jsdelivr.net/npm/@simonwep/pickr/dist/pickr.min.js"></script>
   </head>
   <body>
      <div class="container">
         <div class="title">Draw from Memory</div>
         <div id="progress" class="instruction">Challenge <span id="currentNum">1</span> of 10</div>
         <div class="card">
            <div class="header header-grid">
               <div class="left">
                  <button id="backBtn" class="btn subtle">&larr; Back</button>
               </div>
               <div class="center">
                  <div class="prompt-bubble">
                     <div class="prompt-text" id="logoLabel">
                        Draw the MyAnimeList logo from memory.
                     </div>
                     <div class="reroll-container">
                        <button id="rerollBtn" class="btn reroll-btn" type="button">
                        Re-roll
                        </button>
                        <div id="rerollCountDisplay" style="font-size: 13px; color: #444; margin-left: 4px;">0 used</div>
                     </div>
                  </div>
               </div>
               <div class="right">
                  <button id="nextBtn" class="btn primary">Next</button>
               </div>
            </div>
            <div class="drawing-section">
               <button id="easyModeBtn" class="easy-mode-btn">üëÅ</button>
               <input type="checkbox" id="easyModeToggle" hidden>
               <div class="canvas-container single">
                  <canvas id="drawingCanvas"></canvas>
               </div>
            </div>
            <div class="toolbar">
               <div class="tools">
                  <label class="tool">
                  Width
                  <input type="range" id="brushWidth" min="1" max="36" value="6" />
                  </label>
                  <div class="colors" id="colorPicker" aria-label="Brush colors"></div>
                  <div id="currentColorIndicator" class="current-color-indicator" ></div>
                  <button id="fillToggle" class="icon-btn" type="button">
                     <svg viewBox="0 0 24 24" width="20" height="20">
                        <path d="M3 9l6-6 6 6M5 9h14l-1.5 10.5a2 2 0 0 1-2 1.5H8.5a2 2 0 0 1-2-1.5L5 9zm11.2 1.8c.9 1 .8 2.5-.2 3.4-.9.8-2.4.8-3.3-.1" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M20.5 6c.7.8.7 2-.1 2.8-.7.7-1.9.7-2.6 0-.8-.8-.8-2 0-2.8.7-.7 1.9-.7 2.7 0z" fill="currentColor"/>
                     </svg>
                  </button>
               </div>
               <div class="actions">
                  <button id="clearBtn" class="btn">Clear</button>
               </div>
            </div>
            <div class="signature-box">
               <label>Your Signature:</label>
               <canvas id="signatureCanvas" width="300" height="60"></canvas>
               <button id="clearSig" class="btn" >Clear</button>
            </div>
         </div>
      </div>
      <!-- Final composite overlay -->
      <div id="finalOverlay" class="overlay hidden">
         <canvas id="finalCanvas"></canvas>
         <button id="downloadAllBtn" class="btn primary reveal-download" >Download</button>
      </div>
      <div id="finishModal" class="modal-overlay hidden" aria-hidden="true">
         <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="finishTitle">
            <div class="modal-body">
               <h3 id="finishTitle">Ready to finish?</h3>
               <p>You won‚Äôt be able to edit your drawings after this step.</p>
            </div>
            <div class="modal-actions">
               <button id="finishCancel" class="btn" >Cancel</button>
               <button id="finishConfirm" class="btn primary">Yes, finish</button>
            </div>
         </div>
      </div>
      <script src="prompts.js"></script>
      <script src="script.js"></script>
   </body>
</html>